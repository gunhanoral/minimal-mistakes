<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.8.5">Jekyll</generator><link href="/feed.xml" rel="self" type="application/atom+xml" /><link href="/" rel="alternate" type="text/html" /><updated>2019-09-25T12:58:54+03:00</updated><id>/feed.xml</id><title type="html">Gunhan Oral</title><subtitle>Posts about network automation, network engineering and python</subtitle><author><name>Gunhan Oral</name><email>contact@gunhanoral.com</email></author><entry><title type="html">Netmiko</title><link href="/python/netmiko/" rel="alternate" type="text/html" title="Netmiko" /><published>2019-05-13T00:42:12+03:00</published><updated>2019-05-13T00:42:12+03:00</updated><id>/python/netmiko</id><content type="html" xml:base="/python/netmiko/">&lt;p&gt;&lt;a href=&quot;https://github.com/ktbyers/netmiko/tree/master&quot;&gt;Netmiko&lt;/a&gt;, &lt;a href=&quot;https://twitter.com/kirkbyers&quot;&gt;Kirk Byers&lt;/a&gt; (CCIE) tarafından network cihazlarının yönetimini kolaylaştırmak amacıyla Python’ın Paramiko isimli ssh kütüphanesi üzerine yazılmış, pek çok network mühendisinin severek kullandığı bir Python modülüdür. Daha sonradan telnet için de bu modülü geliştirmiş ve Netmiko’ya da eklemiş ama kütüphanenin isminde bu yönde bir değişiklik yapmamış. :)&lt;/p&gt;

&lt;p&gt;Modülün sisteminizde halihazırda olup olmadığını görmek için python interactive shell’de &lt;code class=&quot;highlighter-rouge&quot;&gt;import netmiko&lt;/code&gt; yazarak test edebilir, sisteminize yüklemek için terminal ya da command prompt’ta &lt;code class=&quot;highlighter-rouge&quot;&gt;pip install netmiko&lt;/code&gt; komutunu çalıştırabilirsiniz.&lt;/p&gt;

&lt;h1 id=&quot;örnek&quot;&gt;Örnek&lt;/h1&gt;

&lt;p&gt;Aşağıdaki örnek kod bir test cihazına bağlanıp &lt;code class=&quot;highlighter-rouge&quot;&gt;show version&lt;/code&gt; çıktısı alacak.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;netmiko&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Netmiko&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;cisco1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;host&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;192.168.1.1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;username&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;cisco&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;password&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;cisco&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;device_type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;cisco_ios&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;net_connect&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Netmiko&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cisco1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;command&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;show version&quot;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;net_connect&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;find_prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;output&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;net_connect&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;send_command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;net_connect&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;disconnect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Çıktı tahmin ettiğiniz gibi. Sadece ilk paragrafını kopyalıyorum:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;P1#
Cisco IOS Software, IOSv Software (VIOS-ADVENTERPRISEK9-M), Version 15.6(2)T, RELEASE SOFTWARE (fc2)
Technical Support: http://www.cisco.com/techsupport
Copyright (c) 1986-2016 by Cisco Systems, Inc.
Compiled Tue 22-Mar-16 16:19 by prod_rel_team
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Bir de cihaza config girelim:&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;netmiko&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Netmiko&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;cisco1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;host&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;192.168.1.1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;username&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;cisco&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;password&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;cisco&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;device_type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;cisco_ios&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;net_connect&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Netmiko&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cisco1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;commands&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;hostname P1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;output&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;net_connect&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;send_config_set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;commands&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;net_connect&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;disconnect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Çıktı aşağıdaki gibi:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gunhan@gunhanoral:/tmp$ python netmiko_test.py
config term
Enter configuration commands, one per line.  End with CNTL/Z.
P1(config)#
P1(config)#hostname P1
P1(config)#
P1(config)#end
P1#
P1#
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Görebileceğiniz üzere kullanımı gayet basit bir modül. Tek kritik nokta cihaz tipini belirlemek. Cihaz tipinin sonuna “_telnet” eklerseniz telnet bağlantısı yapar, cihaz tipi olarak “autodetect” yazarsanız cihaz tipini kendisi bulmaya çalışır, username ve password girmezseniz cihaza da girmez vs vs. Detayları &lt;a href=&quot;https://netmiko.readthedocs.io/en/latest/classes/base_connection.html&quot;&gt;burada&lt;/a&gt; bulabilirsiniz.&lt;/p&gt;

&lt;p&gt;Örnek:&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;cisco1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;ip&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;192.168.1.1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;port&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5002&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;device_type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;cisco_ios_telnet&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# ya da &quot;device_type&quot;: &quot;autodetect&quot;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Şu anda desteklediği cihazları aşağıda listeledim. Yanlış bir device_type girdiğinizde zaten bu listeyi çıkartıyor.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;a10
accedian
alcatel_aos
alcatel_sros
apresia_aeos
arista_eos
aruba_os
avaya_ers
avaya_vsp
brocade_fastiron
brocade_netiron
brocade_nos
brocade_vdx
brocade_vyos
calix_b6
checkpoint_gaia
ciena_saos
cisco_asa
cisco_ios
cisco_nxos
cisco_s300
cisco_tp
cisco_wlc
cisco_xe
cisco_xr
coriant
dell_dnos9
dell_force10
dell_isilon
dell_os10
dell_os6
dell_os9
dell_powerconnect
eltex
enterasys
extreme
extreme_ers
extreme_exos
extreme_netiron
extreme_nos
extreme_slx
extreme_vdx
extreme_vsp
extreme_wing
f5_linux
f5_ltm
f5_tmsh
fortinet
generic_termserver
hp_comware
hp_procurve
huawei
huawei_vrpv8
ipinfusion_ocnos
juniper
juniper_junos
linux
mellanox
mrv_optiswitch
netapp_cdot
netscaler
oneaccess_oneos
ovs_linux
paloalto_panos
pluribus
quanta_mesh
rad_etx
ruckus_fastiron
ubiquiti_edge
ubiquiti_edgeswitch
vyatta_vyos
vyos
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>Gunhan Oral</name><email>contact@gunhanoral.com</email></author><category term="Python" /><category term="netmiko" /><summary type="html">Kirk Byers'ın Python için yazdığı netmiko modülü hakkında kısa bir yazı</summary></entry><entry><title type="html">Jinja2 Şablonları</title><link href="/python/jinja2-templating/" rel="alternate" type="text/html" title="Jinja2 Şablonları" /><published>2019-05-05T20:03:21+03:00</published><updated>2019-05-05T20:03:21+03:00</updated><id>/python/jinja2-templating</id><content type="html" xml:base="/python/jinja2-templating/">&lt;h1 id=&quot;giriş&quot;&gt;Giriş&lt;/h1&gt;

&lt;p&gt;Öncelikle bir özet ile başlayalım. Jinja2 çeşitli şablonlar üretmemize yarayan bir Python kütüphanesidir. Biz de bu şablonları network cihazlarının configlerini oluşturmada kullanacağız. Böylece;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;büyük config dosyaları ile uğraşmaktansa sadece değişkenlerle oynayacağız,&lt;/li&gt;
  &lt;li&gt;cihazlar belli bir şablondan çıkmış olacağı için unutulmuş kısımlar olmayacak,&lt;/li&gt;
  &lt;li&gt;değişiklikleri cihazlara uygulamak kolaylaşacak.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Bu amaçlarımıza Python ve Python’ın Jinja2 modülü yardımıyla ulaşacağız. Eğer sisteminizde Python yoksa &lt;a href=&quot;https://www.python.org/downloads/&quot;&gt;buradan indirebilir&lt;/a&gt;, Jinja2 eksikse de &lt;code class=&quot;highlighter-rouge&quot;&gt;pip install jinja2&lt;/code&gt; komutunu çalıştırarak yükleyebilirsiniz.&lt;/p&gt;

&lt;h1 id=&quot;şablonlar&quot;&gt;Şablonlar&lt;/h1&gt;

&lt;p&gt;Hızlıca başlayalım. Aşağıda cihazımıza loopback interface’i ayarlamak için bir template/şablon kullanıyoruz.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;jinja2&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Template&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Şablonumuzu tanımlıyoruz
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;interface loopback0
exit&quot;&quot;&quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;template&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Template&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Ekrana yazdıralım
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Yukarıdaki kodu çalıştırırsanız ekrana “interface loopback0” ve “exit” yazdırdığımızı göreceksiniz. Çok başarılı bir uygulama olmadı, değil mi? Bunu gerçekten de kopyala + yapıştır ile her cihazımıza girebiliriz. O zaman değişkenlerden bahsedelim biraz.&lt;/p&gt;

&lt;h1 id=&quot;değişkenler&quot;&gt;Değişkenler&lt;/h1&gt;

&lt;p&gt;Bu kısımda şablonda belirlediğimiz alanlara istediklerimizi yazdıracağız. Örneğin:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;jinja2&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Template&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Şablonumuzu tanımlıyoruz
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;interface loopback0
ip address {{ ip_address }} {{ netmask }}
exit
&quot;&quot;&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;template&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Template&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Şablonumuzun içini değişkenlerle doldurup ekrana yazdırıyoruz
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ip_address&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'1.2.3.4'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;netmask&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'255.255.255.0'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Aldığımız çıktı aşağıdaki gibi olacaktır:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;interface loopback0
ip address 1.2.3.4 255.255.255.0
exit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Farkettiyseniz çift tırnak (süslü) parantez ile belirttiğimiz noktaların içini doldurduk. Jinja2’de değişkenler bu şekilde tanımlanıyor;
&lt;code class=&quot;highlighter-rouge&quot;&gt;{{ degisken_adi }}&lt;/code&gt;. Daha sonra da değişkenlere verdiğimiz değerlerle bu alanların içini dolduruyoruz.&lt;/p&gt;

&lt;p&gt;Yukarıdakini biraz daha farklı bir şekilde yazalım:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;jinja2&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Template&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Şablonumuzu tanımlıyoruz
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;interface loopback0
ip address {{ ip_address }} {{ netmask }}
exit
&quot;&quot;&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;template&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Template&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Değişkenlerimizi tanımlıyoruz
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;degiskenler&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;'ip_address'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'1.2.3.4'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;'netmask'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'255.255.255.0'&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Şablonumuzun içini değişkenlerle doldurup ekrana yazdıralım
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;degiskenler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Süper, her şey güzel gidiyor. Ancak sadece bir cihaz için bir interface tanımladık. Bu kadarla kısıtlı kalmayacak herhalde, değil mi?&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;jinja2&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Template&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Şablonumuzu tanımlıyoruz
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;! ### {{ device_name }} için config ###
interface loopback0
ip address {{ ip_address }} {{ netmask }}
exit
! ### {{ device_name }} için config ###

&quot;&quot;&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;template&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Template&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Değişkenlerimizi tanımlıyoruz
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;devices&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'device_name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'R1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;'ip_address'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'2.3.4.5'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;'netmask'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'255.255.255.255'&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'device_name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'R2'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;'ip_address'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'22.33.44.55'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;'netmask'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'255.255.255.0'&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Şablonumuzun içini her bir cihaz için değişkenlerle doldurup ekrana yazdıralım
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;device&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;devices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;device&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Tebrikler, artık her cihaz için bir çıktı oluşturabiliyorsunuz.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;! ### R1 için config ###
interface loopback0
ip address 2.3.4.5 255.255.255.255
exit
! ### R1 için config ###

! ### R2 için config ###
interface loopback0
ip address 22.33.44.55 255.255.255.0
exit
! ### R2 için config ###
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;döngüler&quot;&gt;Döngüler&lt;/h1&gt;

&lt;p&gt;Her cihaz sadece bir adet interface’e sahip olmayacak, değil mi?&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;jinja2&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Template&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Şablonumuzu tanımlıyoruz
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;! ### {{ device_name }} için config ###
hostname {{ device_name }}
{&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;% &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;for interface in interfaces &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;}
interface {{ interface.name }}
description {{ interface.description }}
ip address {{ interface.ip_address }} {{ interface.netmask }}
exit
{&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;% &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;endfor &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;}
! ### {{ device_name }} için config ###

&quot;&quot;&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;template&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Template&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Değişkenlerimizi tanımlıyoruz
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;devices&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'device_name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'R1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;'interfaces'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Loopback0'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'description'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'IGP Loopback'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'ip_address'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'10.1.1.1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'netmask'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'255.255.255.255'&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Loopback10'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'description'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'TEST LOOPBACK'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'ip_address'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'10.10.10.0'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'netmask'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'255.255.255.0'&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}]&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'device_name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'R2'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;'interfaces'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Loopback0'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'description'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'IGP Loopback'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'ip_address'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'10.2.2.2'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'netmask'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'255.255.255.255'&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}]&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'device_name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'R3'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Şablonumuzun içini her bir cihaz için değişkenlerle doldurup ekrana yazdıralım
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;device&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;devices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;device&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Değişken yapısını değiştirdim. Artık her bir cihazın altında “interfaces” isimli birer list daha var ve bu list’ler interface değişkenlerinin olduğu dictionarylerden oluşuyor.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;{% for interface in interfaces %}&lt;/code&gt; ve &lt;code class=&quot;highlighter-rouge&quot;&gt;{% endfor %}&lt;/code&gt; arasındaki kısım değişkenlerimizdeki her bir interface için derlenecek. R1 cihazı 2 interface’e sahip olduğu için bu iki interface’in configleri derlenip yazdırıldı, R2’de 1 interface vardı, R3’te ise hiç interface olmadığı için ekrana interface ile ilgili hiç bir şey yazdırılmadı:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;! ### R1 için config ###
hostname R1

interface Loopback0
description IGP Loopback
ip address 10.1.1.1 255.255.255.255
exit

interface Loopback10
description TEST LOOPBACK
ip address 10.10.10.0 255.255.255.0
exit

! ### R1 için config ###

! ### R2 için config ###
hostname R2

interface Loopback0
description IGP Loopback
ip address 10.2.2.2 255.255.255.255
exit

! ### R2 için config ###

! ### R3 için config ###
hostname R3

! ### R3 için config ###
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;şartlı-durumlar&quot;&gt;Şartlı durumlar&lt;/h1&gt;

&lt;p&gt;Son olarak şartlı durumları inceleyelim. Her interface bir description’a sahip olmayabilir. Ya da bazı interface’ler ospf’e dahil edilirken bazıları edilmeyecektir. Template’imizi bu durumlara göre uyarlayalım. If, else ve endif anahtarlarına dikkat edin.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;jinja2&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Template&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Şablonumuzu tanımlıyoruz
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;! ### {{ device_name }} için config ###
hostname {{ device_name }}
{&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;% &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;for interface in interfaces &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;}
interface {{ interface.name }}
{&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;% &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;if interface.description &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;}description {{ interface.description }}{&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;% &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;else &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;}description ### NO DESC ###{&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;% &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;endif &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;}
{&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;% &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;if interface.ospf &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;}ip ospf 1 area 0{&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;% &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;endif &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;}
ip address {{ interface.ip_address }} {{ interface.netmask }}
exit
{&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;% &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;endfor &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;}
! ### {{ device_name }} için config ###

&quot;&quot;&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;template&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Template&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Değişkenlerimizi tanımlıyoruz
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;devices&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'device_name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'R1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;'interfaces'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Loopback0'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'description'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'IGP Loopback'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'ip_address'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'10.1.1.1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'netmask'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'255.255.255.255'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'ospf'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Loopback10'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'description'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'TEST LOOPBACK'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'ip_address'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'10.10.10.0'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'netmask'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'255.255.255.0'&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}]&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'device_name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'R2'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;'interfaces'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Loopback0'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'description'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'IGP Loopback'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'ip_address'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'10.2.2.2'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'netmask'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'255.255.255.255'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'ospf'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}]&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'device_name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'R3'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;'interfaces'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Loopback0'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'ip_address'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'10.3.3.3'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'netmask'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'255.255.255.255'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'ospf'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}]&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Şablonumuzun içini her bir cihaz için değişkenlerle doldurup ekrana yazdıralım
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;device&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;devices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;device&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Aşağıdaki çıktıda görebileceğiniz üzere R1’in Loopback10 interface’inde ospf komutu yok, R3’ün Loopback0’ında description girmediğimiz için şablondaki description ile ilgili şartlı durumun “else” kısmı çalışmış ve description olarak “NO DESC” yazılmış.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;! ### R1 için config ###
hostname R1

interface Loopback0
description IGP Loopback
ip ospf 1 area 0
ip address 10.1.1.1 255.255.255.255
exit

interface Loopback10
description TEST LOOPBACK

ip address 10.10.10.0 255.255.255.0
exit

! ### R1 için config ###

! ### R2 için config ###
hostname R2

interface Loopback0
description IGP Loopback
ip ospf 1 area 0
ip address 10.2.2.2 255.255.255.255
exit

! ### R2 için config ###

! ### R3 için config ###
hostname R3

interface Loopback0
description ### NO DESC ###
ip ospf 1 area 0
ip address 10.3.3.3 255.255.255.255
exit

! ### R3 için config ###
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;sonuç&quot;&gt;Sonuç&lt;/h1&gt;

&lt;p&gt;Jinja2 template’lerini cihazlarınızı belli bir standarta oturtmak için kullanabilirsiniz. Ayrıca cihaz config’i oluşturmak için büyük kolaylık sağladığı gibi hataları da azaltacaktır (Aaa ben o cihaza snmp config’i girmemiş miyim? tüh &amp;gt;.&amp;gt; ). Bunların yanısıra eğer Ansible veya benzeri bir configuration management tool’u kullanıyorsanız template’i değiştirmeniz ve bunu cihazlarınız üzerinde kullanmanız tüm network config’ini değiştirmenize olanak tanıyacaktır. Büyük kolaylık sağladığı gibi büyük hatalara da yol açabilir, dikkatli olun.&lt;/p&gt;</content><author><name>Gunhan Oral</name><email>contact@gunhanoral.com</email></author><category term="Python" /><category term="Jinja2" /><summary type="html">Jinja2 ile çeşitli şablonlar oluşturup bunları network configleri için kullanacağız</summary></entry><entry><title type="html">Ansible dinamik envanter</title><link href="/network/ansible-dynamic-inventory/" rel="alternate" type="text/html" title="Ansible dinamik envanter" /><published>2017-09-24T18:13:28+03:00</published><updated>2017-09-24T18:13:28+03:00</updated><id>/network/ansible-dynamic-inventory</id><content type="html" xml:base="/network/ansible-dynamic-inventory/">&lt;h2 id=&quot;dinamik-envanter&quot;&gt;Dinamik envanter?&lt;/h2&gt;

&lt;p&gt;Ansible host dosyasını sistemlerimizdeki her değişiklikte güncelleyeceksek işimiz iş demektir. Ancak Ansible bizim için bu durumu da öngörmüş ve &lt;a href=&quot;http://docs.ansible.com/ansible/latest/intro_dynamic_inventory.html&quot;&gt;çeşitli imkanlar sağlamış&lt;/a&gt;. Tabi biz her zaman AWS (ya da benzeri bir yapı) ile çalışacak değiliz.&lt;/p&gt;

&lt;h2 id=&quot;özelleştirilmiş&quot;&gt;Özelleştirilmiş?&lt;/h2&gt;

&lt;p&gt;Özelleştirilmişten kasıt kendi üretimimiz, el emeğimiz, python scriptimiz (ya da istediğiniz bir dil) olacak. Aslında çok basit, Ansible envanter olarak spesifik bir formata uygun json çıktısı bekliyor. &lt;a href=&quot;https://www.jeffgeerling.com/blog/creating-custom-dynamic-inventories-ansible&quot;&gt;Jeff Geerling bloğunda&lt;/a&gt; bu beklentiyi karşılamanın yolunu şöyle göstermiş:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;{
    &quot;group&quot;: {
        &quot;hosts&quot;: [
            &quot;192.168.28.71&quot;,
            &quot;192.168.28.72&quot;
        ],
        &quot;vars&quot;: {
            &quot;ansible_ssh_user&quot;: &quot;johndoe&quot;,
            &quot;ansible_ssh_private_key_file&quot;: &quot;~/.ssh/mykey&quot;,
            &quot;example_variable&quot;: &quot;value&quot;
        }
    },
    &quot;_meta&quot;: {
        &quot;hostvars&quot;: {
            &quot;192.168.28.71&quot;: {
                &quot;host_specific_var&quot;: &quot;bar&quot;
            },
            &quot;192.168.28.72&quot;: {
                &quot;host_specific_var&quot;: &quot;foo&quot;
            }
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Sonra bu basit iş için aşırı kompleks bir kod önerisinde bulunmuş - ki bence hiç gerek yok. Biz daha sadesini üreteceğiz. Unutmayın, ihtiyacımız yukarıdaki gibi bir çıktı almak.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;#!/home/gunhan/anaconda3/bin/python
&lt;/span&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;collections&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;defaultdict&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pandas&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pd&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;json&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# envantere ait bilgiler
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pd&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DataFrame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'equipip'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'10.0.0.1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'10.0.0.2'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'10.0.0.3'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'10.0.0.4'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'10.0.0.5'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'username'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'admin'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'admin'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'root'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'admin'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'admin'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'pwd'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Hu@w31'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Actelis1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'ETZ'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Hu@w31'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Hu@w31'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'hostname'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'sw01'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'dslam01'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'msan01'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'sw02'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'sw03'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;'vend'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Huawei'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Actelis'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'ZTE'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Huawei'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Huawei'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# bir iki döngü ile sözlüğü dolduruyoruz
&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;env&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;defaultdict&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;dict&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;make&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vend&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unique&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'hosts'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vend&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;equipip&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tolist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'vars'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ansible_ssh_user&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vend&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'username'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unique&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]}&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;_meta&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;hostvars&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;defaultdict&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;dict&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;row&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;iterrows&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;_meta&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;hostvars&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'equipip'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;password&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'pwd'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# sonra da sözlüğü ekrana json formatına uygun bir şekilde yazdırıyoruz
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dumps&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Yukarıdaki örnekte &lt;em&gt;pandas&lt;/em&gt; kullanmamın sebebi cihazlarla ilgili bilgileri bir yerden (örn &lt;em&gt;excel&lt;/em&gt; dosyası ya da &lt;em&gt;sql&lt;/em&gt; sorgusu) çektiğimizi farzetmem. DataFrame içeriği sql ile çekilmiş veriler de olabilirdi:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;pd.read_sql(&quot;select top 10 * from devicetable&quot;, pymssql.connect(*args))&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;df içeriği aşağıdaki gibi gözüküyor:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt; df
    equipip hostname       pwd username     vend
0  10.0.0.1     sw01    Hu@w31    admin   Huawei
1  10.0.0.2  dslam01  Actelis1    admin  Actelis
2  10.0.0.3   msan01       ETZ     root      ZTE
3  10.0.0.4     sw02    Hu@w31    admin   Huawei
4  10.0.0.5     sw03    Hu@w31    admin   Huawei
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Burada önemli olan envanter dosyası çalıştırıldığında yeni bilgileri alıp sözlük içine atması.&lt;/p&gt;

&lt;p&gt;Scripti yazdıktan sonra dosyanın çalıştırılabilir olmasına dikkat edelim. &lt;code class=&quot;highlighter-rouge&quot;&gt;chmod +x inventory.py&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Sonra da ansible’ı çalıştıralım:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;/usr/bin/ansible -i inventory.py Huawei -m ping&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Sonuç:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;10.0.0.4 | UNREACHABLE! =&amp;gt; {
    &quot;changed&quot;: false,
    &quot;msg&quot;: &quot;Failed to connect to the host via ssh: ssh: connect to host 10.0.0.4 port 22: Connection timed out\r\n&quot;,
    &quot;unreachable&quot;: true
}
10.0.0.5 | UNREACHABLE! =&amp;gt; {
    &quot;changed&quot;: false,
    &quot;msg&quot;: &quot;Failed to connect to the host via ssh: ssh: connect to host 10.0.0.5 port 22: Connection timed out\r\n&quot;,
    &quot;unreachable&quot;: true
}
10.0.0.1 | UNREACHABLE! =&amp;gt; {
    &quot;changed&quot;: false,
    &quot;msg&quot;: &quot;Failed to connect to the host via ssh: ssh: connect to host 10.0.0.1 port 22: Connection timed out\r\n&quot;,
    &quot;unreachable&quot;: true
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>Gunhan Oral</name><email>contact@gunhanoral.com</email></author><category term="network" /><category term="python" /><category term="ansible" /><category term="network automation" /><category term="network orchestration" /><category term="featured" /><summary type="html">Ansible'da özelleştirilmiş dinamik envanter nasıl hazırlanır?</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="/assets/article_images/2017-09-16-ansible-notlari/Ansible_logo_wordmark.jpg" /></entry><entry><title type="html">Ansible Notları</title><link href="/network/ansible-notlari/" rel="alternate" type="text/html" title="Ansible Notları" /><published>2017-09-16T20:42:38+03:00</published><updated>2017-09-16T20:42:38+03:00</updated><id>/network/ansible-notlari</id><content type="html" xml:base="/network/ansible-notlari/">&lt;h1 id=&quot;ansible-nedir&quot;&gt;Ansible Nedir?&lt;/h1&gt;

&lt;p&gt;&lt;a href=&quot;https://www.ansible.com/&quot;&gt;Ansible&lt;/a&gt; “Simple IT Automation” mottosuyla çıkan IT otomasyonunu kolaylaştıran (ve hatta automation harici orchestration da yapabilen) Python temelli bir yazılım. Ansible sayesinde birden fazla cihaza bağlanıp basit komutları çalıştırabileceğimiz gibi, kompleks senaryoları da gerçekleştirebiliyoruz. Şimdiye kadar yazdığım en kompleks &lt;em&gt;playbook&lt;/em&gt; uptime’ı 300 günün üzerindeki linux cihazları tespit etmek olsa da zamanla daha iyi şeyler yapabileceğimi düşünüyorum. Ansible’ın en büyük artısı &lt;a href=&quot;http://docs.ansible.com/ansible/latest/modules_by_category.html&quot;&gt;modülleri&lt;/a&gt;. Genellikle firmaların kendi cihazları için çıkarttığı modüller sayesinde bu cihazların yönetimi çok kolaylaşıyor. Örneğin Cisco’nun iosxe, iosxr, asa, aci için çıkarttığı modüller sayesinde hem yapılan işlemler kontrol altında tutuluyor, hem de yapılan işlemlerin çıktıları ekstra emeğe gerek kalmadan okunaklı ve düzgün bir biçimde tutuluyor.&lt;/p&gt;

&lt;p&gt;Ansible’ı ben beğendim. Günlük işlerimde otomasyon için kullandığım scriptleri bir kenara bıraktığımı söyleyebilirim.&lt;/p&gt;

&lt;p&gt;Şimdilik üç noktaya odaklanalım:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Inventory&lt;/li&gt;
  &lt;li&gt;Ad-hoc commands&lt;/li&gt;
  &lt;li&gt;Playbooks&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;inventory---envanter&quot;&gt;Inventory - Envanter&lt;/h2&gt;

&lt;p&gt;Ansible bağlantı sağlayacağı cihazları envanterinden seçiyor. Yani envanterde olmayan bir cihaza bağlanamıyorsunuz. Bir cihazı envantere eklemek çok basit. /etc/ansible/hosts dosyasını açtığınızda zaten syntax’ı anlayacaksınız ama ben yine de bir örnek göstereyim.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[finans]
10.0.0.1
10.0.0.2
10.0.0.3

[bt]
10.0.1.1
10.0.1.5

[cisco]
10.0.0.1
10.0.1.1
abc.com
10.0.0.3

[cisco:vars]
ansible_ssh_user=cisco
baska_bir_degisken=ciscocuk
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Anlayabileceğiniz üzere cisco grubu için özel değişkenler atanabiliyor. Finans grubu için özel değişken ataması yapılacak olsa &lt;code class=&quot;highlighter-rouge&quot;&gt;[finans:vars]&lt;/code&gt; isminde bir grup tanımlaması yapılabilir.&lt;/p&gt;

&lt;p&gt;Bunların haricinde dinamik envanterler de oluşturulabiliyor.&lt;/p&gt;

&lt;h2 id=&quot;ad-hoc-commands&quot;&gt;Ad-Hoc Commands&lt;/h2&gt;

&lt;p&gt;Bunlar cli üzerinde basit işlemler yapmak için kullanılan komutlardır. Örneğin:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;root@ansible:~# ansible finans -a &quot;uptime&quot;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Bu komut finans grubundaki cihazlara ssh ile bağlanıp uptime komutunu çalıştıracaktır. Bir iki noktaya dikkat çekeyim:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;SSH bağlantısı için kullanıcı adı girmedik. Şu anda root olarak çalıştığımız için diğer cihaza da otomatik olarak root ile bağlanmaya çalışacaktır. İstersek -u komutu ile kullanıcı adı girebilirizz&lt;/li&gt;
  &lt;li&gt;SSH bağlantısı için şifre girmedik. Default olarak kayıtlı key ile bağlanmaya çalışacaktır. İstersek -k ile şifre sormasını sağlayabiliriz.&lt;/li&gt;
  &lt;li&gt;Şimdilik odül belirtmedik. Default modül ile işlem yapıyoruz. İstersek -m ile modül belirtebiliriz.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@ansible:~# ansible finans[0] &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;uptime&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt; gunhan &lt;span class=&quot;nt&quot;&gt;-k&lt;/span&gt;
SSH password:
10.0.0.1 | SUCCESS | &lt;span class=&quot;nv&quot;&gt;rc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;0 &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt;
 02:57:49 up 255 days, 22:46,  2 &lt;span class=&quot;nb&quot;&gt;users&lt;/span&gt;,  load average: 0.00, 0.01, 0.05
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Aşağıdaki örnekteki ping modülü karşı cihaza ssh ile bağlanılıp bağlanılamadığını ve bağlanılan cihazda çalıştırılabilir python modülü olup olmadığını kontrol ediyor. ICMP ping ile karıştırmayınız. Ansible’da bir çok modül karşı uçta çalıştırılabilir bir python sürümü olduğunda (spesifik olarak /usr/bin/python) işlem yapabiliyor. Örneğin yukarıdaki örnekte “uptime” komutunu çalıştıran aslında karşı uçtaki python modülü. Bu nedenle çalıştırdığınız komutun gereksinimlerine dikkat etmeniz önemli.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@quigon:~# ansible finans[0] &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; ping
10.0.0.1 | SUCCESS &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;changed&quot;&lt;/span&gt;: &lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;,
    &lt;span class=&quot;s2&quot;&gt;&quot;ping&quot;&lt;/span&gt;: &lt;span class=&quot;s2&quot;&gt;&quot;pong&quot;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Kullanmak istediğiniz modüllere &lt;a href=&quot;http://docs.ansible.com/ansible/latest/modules_by_category.html&quot;&gt;bu sayfadan&lt;/a&gt; bakmanızı öneririm.&lt;/p&gt;

&lt;h2 id=&quot;playbooks&quot;&gt;Playbooks&lt;/h2&gt;

&lt;p&gt;Ansible’ın parladığı nokta playbookları. Ad-hoc yapılamayacak kompleks işlemleri playbooklar yardımı ile kolaylıkla… Aslında hiç kolay değil şimdilik ama biraz daha kullanınca kolaylaşmaya başlayacak diye umuyorum. :)&lt;/p&gt;

&lt;p&gt;İlk yazdığım playbooklardan birisine göz atalım:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;---
- hosts: cisco901[11:15]
  gather_facts: no
  connection: local

  vars_prompt:
  - name: &quot;mgmt_username&quot;
    prompt: &quot;Username&quot;
    private: no
  - name: &quot;mgmt_password&quot;
    prompt: &quot;Password&quot;

  tasks:

  - name: SYS | Define provider
    set_fact:
      provider:
        host: &quot;&quot;
        username: &quot;&quot;
        password: &quot;&quot;

  - name: IOS | Show clock
    ios_command:
      provider: &quot;&quot;
      commands:
        - show clock
    register: clock

  - debug: msg=&quot;&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;hosts:&lt;/strong&gt; envanter dosyamdaki cisco901 grubundaki 11’den 15’e kadarki elemanları seçiyorum ve bu cihazlara bağlanıyorum.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;gather_facts:&lt;/strong&gt; Normalde Ansible ilk bağlandığında setup modülünü çalıştırıp çeşitli fact’ler elde ediyor. Buna gerek olmadığı için boşuna çalıştırmıyoruz.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;connection:&lt;/strong&gt; “show clock” komutunu çalıştırmak için ios_command modülünü kullanacağız. Bu modülün gereksinimlerinden birisi connection’ın local olması, diğeri de provider değişkeninin kullanılması. Bu sayede provider değişkenlerindeki değerlerle bağlantı sağlanıyor.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;vars_prompt:&lt;/strong&gt; Provider içine atılacak kullanıcı adı ve şifre kısımlarının kullanıcıya sorulması sağlanıyor.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;tasks:&lt;/strong&gt; Bu kısım karşı uçlarda yapılacak işlemleri tanımladığımız kısım. 3 tasks var, ilk ikisine isim verilmiş, üçüncüsü isimsiz kalmış.
    &lt;ol&gt;
      &lt;li&gt;&lt;strong&gt;SYS | Define provider:&lt;/strong&gt; set_fact modülü yardımıyla provider’ın içi dolduruluyor: host, username, password&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;IOS | Show clock:&lt;/strong&gt; ios_command modülünü kullanıyoruz. Provider özellikleri belirtilip “show clock” komutu gönderiliyor. Komutun çıktısı clock isimli değişkene &lt;em&gt;register&lt;/em&gt; ediliyor.&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;debug&lt;/strong&gt; modülü ile clock değişkeni ekrana yazdırılıyor.&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;</content><author><name>Gunhan Oral</name><email>contact@gunhanoral.com</email></author><category term="network" /><category term="python" /><category term="ansible" /><category term="network automation" /><category term="network orchestration" /><category term="featured" /><summary type="html">Ansible ile ilgili notlar</summary></entry><entry><title type="html">GNS3 VM Kurulumu</title><link href="/network/gns_vm_kurulumu/" rel="alternate" type="text/html" title="GNS3 VM Kurulumu" /><published>2017-08-23T22:33:32+03:00</published><updated>2017-08-23T22:33:32+03:00</updated><id>/network/gns_vm_kurulumu</id><content type="html" xml:base="/network/gns_vm_kurulumu/">&lt;p&gt;Windows 10 üzerine GNS3 kurarken bazı dertler, çileler çektim. Biraz kendime not olsun diye, biraz da internette arayıp derdine derman bulamayanlara çözüm olsun diye buraya not düşüyorum.&lt;/p&gt;

&lt;h1 id=&quot;gns3&quot;&gt;GNS3&lt;/h1&gt;

&lt;p&gt;Bildiğiniz üzere GNS3 network cihazlarında kullanılan işletim sistemlerini bilgisayarınızda çalıştırabileceğiniz bir uygulama. Özellikle eğitim amaçlı ve test amaçlı çokça kullanılıyor. CCNA, CCNP konuları için GNS3’te çalışmak standart olmuştur diyebilirim. Bilgisayar özellikleriniz yettiğince ufak bir topoloji oluşturup bu cihazları birbirine bağlayabilir, network üzerinde OSPF, EIGRP, BGP hatta at koşturabilirsiniz. Wireshark ile bu mesajlaşmaları inceleyebilir, bu topoloji üzerinden internete çıkabilirsiniz. Epey kullanışlı ve öğretici bir program.&lt;/p&gt;

&lt;h2 id=&quot;gns3-indirme-ve-yükleme&quot;&gt;GNS3 indirme ve yükleme&lt;/h2&gt;

&lt;p&gt;GNS3 kullanmak eskiden daha bir kolaydı sanki. Standart bir kurulum yapar, ardından import ettiğimiz ios’ları çalıştırır, cihazlara bağlanıp konfigürasyona başlardık. Artık kurulumu birazcık daha değişmiş, bir nebze zorlaşmış. Gelin ilk önce &lt;a href=&quot;https://www.gns3.com/software/download&quot;&gt;GNS3’ün kendi sitesinden&lt;/a&gt; GNS3’ü indirelim. İlgili adresteki download butonuna tıkladıktan sonra platformunuza uygun sürümü seçerek indirmeye başlayın. Sanırım üyelik istiyordu, üye olmanızda bir sakınca yok. Sitede birçok konu hakkında bilgi mevcut.&lt;/p&gt;

&lt;p&gt;Sonrası aslında gayet kolay bir kurulum. Next tuşlarına ardı ardına basmanız yeterli olacaktır. Ben Solarwinds gibi ekstra programları yüklemedim. Winpcap’in son sürümü bilgisayarımda halihazırda vardı ancak yine de aynı sürümü yüklemek gerekebiliyormuş, haberiniz olsun.&lt;/p&gt;

&lt;h3 id=&quot;test&quot;&gt;Test&lt;/h3&gt;

&lt;p&gt;GNS3 kurulduktan sonra çabucak bir test yapalım. Yeni bir proje oluşturup adına test-pcs gibi bir isim verebiliriz. Sol menüden End Devices’ı seçip birkaç tane PC ekleyelim. Bu PC’leri bir hub yardımı ile birbirine bağlayalım. Üst menüden Start All Nodes’a ve ardından Console Connect to All Nodes’a basalım. PC’lere &lt;code class=&quot;highlighter-rouge&quot;&gt;ip 10.0.0.1 255.255.255.0&lt;/code&gt; ve &lt;code class=&quot;highlighter-rouge&quot;&gt;ip 10.0.0.2 255.255.255.0&lt;/code&gt; komutlarıyla ip verdikten sonra bir cihazdan diğerine başarılı bir biçimde ping atabiliyor olmalıyız. Sorun yaşanıyorsa GNS3’teki loglara göre inceleme yapmakta fayda var. Ancak genelde sorun olmuyor ya da GNS3’ü engelleyen Antivirus’te uygulamaya izin vererek sorun gideriliyor.&lt;/p&gt;

&lt;h2 id=&quot;gns3-vm&quot;&gt;GNS3 VM&lt;/h2&gt;

&lt;p&gt;GNS3 VM gerek güvenlik gerek de hız açısından standart GNS3’e göre avantajlara sahip. Bu avantajları kullanabilmek için bir sanal makine yöneticisine, bir de GNS3 VM imajına sahip olmanız gerekmekte. Vmware Workstation ve Oracle VirtualBox sanal makine yönetimi için iki çözüm. Hangisi ile çalışacağımızı seçtikten sonra GNS3 VM’in ilgili versiyonunu &lt;a href=&quot;https://www.gns3.com/software/download-vm&quot;&gt;sitesinden&lt;/a&gt; indirebiliriz. Ben, kendi bilgisayarımda VirtualBox ile kurulum yaptığım için bu kurulumu anlatacağım.&lt;/p&gt;

&lt;p&gt;İlk önce sitesinden VirtualBox’ın &lt;a href=&quot;https://www.virtualbox.org/wiki/Downloads&quot;&gt;son sürümünü&lt;/a&gt; indirelim. Dosya inerken ben de size yaşadığım sorunu anlatayım:&lt;/p&gt;

&lt;h3 id=&quot;kurulum-öncesi-bir-ek-bilgi&quot;&gt;Kurulum öncesi bir ek bilgi&lt;/h3&gt;

&lt;p&gt;GNS3 her seferinde şöyle bir hata veriyordu: “Error while setting up node: GNS3VM: DHCP must be enabled on VirtualBox host-only network: vboxnet0 for GNS3 VM” Bu hatadan kurtulmak için yaptıklarım:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;VirtualBox kurulumundan sonra sistemi yeniden başlatmak gerekiyormuş. Kurulum sonrası sorulmadığı için ben es geçmiştim, bu yüzden host-only network’üm hiç oluşmadı. Manuel oluşturma çabalarım da hata verdi.&lt;/li&gt;
  &lt;li&gt;Sonrasında File -&amp;gt; Preferences -&amp;gt; Network -&amp;gt; Host-Only Networks kısmında yer alan ilgili adapter’ı aşağıdaki şekilde konfigüre ettim:
    &lt;ul&gt;
      &lt;li&gt;IPv4 Address: 192.168.225.1&lt;/li&gt;
      &lt;li&gt;IPv4 Network Mask: 255.255.255.0&lt;/li&gt;
      &lt;li&gt;DHCP Server: Enabled&lt;/li&gt;
      &lt;li&gt;Server Address: 192.168.225.254&lt;/li&gt;
      &lt;li&gt;Server Mask: 255.255.255.0&lt;/li&gt;
      &lt;li&gt;Lower Address Bound: 192.168.225.100&lt;/li&gt;
      &lt;li&gt;Upper Address Bound: 192.168.225.200&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Bu esnada hala düzelmeyince birkaç defa Windows Network and Sharing Centre’daki adapter’ı disable/enable yaptım ama işe yaramadı.&lt;/li&gt;
  &lt;li&gt;VirtualBox’ı silip &lt;code class=&quot;highlighter-rouge&quot;&gt;VirtualBox-5.1.26-117224-Win.exe -msiparams NETWORKTYPE=NDIS5&lt;/code&gt; parametresiyle yeniden kurdum. İşe yaramadı.&lt;/li&gt;
  &lt;li&gt;En son GNS3 VM’i seçip Settings -&amp;gt; Network -&amp;gt; Adapter 1 -&amp;gt; Advanced -&amp;gt; Promiscuous Mode’u Allow All yapınca sorunum giderildi.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Bunu kurulumdan önce belirtiyorum ki belki siz de kurulumu &lt;code class=&quot;highlighter-rouge&quot;&gt;-msiparams NETWORKTYPE=NDIS5&lt;/code&gt; parametresiyle yapmak istersiniz. Belki diğer adımlar olmadan sadece son adım işe yarar, belki de her biri sorun yaşanmaması için gereklidi, bilemiyorum. Bence normal kurulum yapıp promiscuous modu denemekte fayda var.&lt;/p&gt;

&lt;h3 id=&quot;kuruluma-devam&quot;&gt;Kuruluma Devam&lt;/h3&gt;

&lt;p&gt;VirtualBox’u NDIS5 ya da NDIS6 ile kuralım. İndirdiğimiz GNS3 VM’i zip dosyasından çıkartalım ve VirtualBox’a tanıtalım. VM’i çalıştırmaya gerek yok, GNS3’ü konfigüre ettikten sonra GNS açıldığında VM otomatik olarak başlayacak.&lt;/p&gt;

&lt;p&gt;GNS3’te Edit -&amp;gt; Preferences -&amp;gt; VirtualBox VMs -&amp;gt; Add -&amp;gt; Local Computer -&amp;gt; GNS3 VM seçilip eklenmeli.
Aynı preference menusunde GNS3 VM -&amp;gt; Enable GNS3 VM seçildikten sonra Virtualization Engine VirtualBox, Settings altında VM name GNS3 VM seçilmeli. Diğer ayarlar olduğu gibi bırakılabilir.&lt;/p&gt;

&lt;h3 id=&quot;test-1&quot;&gt;Test&lt;/h3&gt;

&lt;p&gt;Bu noktada bir test daha yapmakta fayda var. Virtual PC eklediğimizde DHCP hatası alıyorsak üstteki adımları inceleyerek sorunu gidermeyi deneyebiliriz. Eğer hata almıyorsak yine iki üç PC’yi bir Hub ile bağlayaıp birbirine eriştirmeyi denemeliyiz. Eğer çalışıyorsa kutlarım, başarılı bir kurulum sağlamışsınız demektir. GNS3’ü kapatabilirsiniz.&lt;/p&gt;

&lt;h2 id=&quot;appliance&quot;&gt;Appliance&lt;/h2&gt;

&lt;p&gt;Gelin birlikte bir appliance indirip yükleyelim. &lt;a href=&quot;https://www.gns3.com/marketplace&quot;&gt;GNS3 Marketplace&lt;/a&gt;‘den &lt;a href=&quot;https://www.gns3.com/marketplace/appliance/network-automation&quot;&gt;Network Automation&lt;/a&gt; appliance’ını indirelim. Birkaç kb’lık bir dosya inecek. Çift tıkladığınızda GNS3’ü başlayacak. Birkaç adımlık bir kurulumdan sonra sol menüde Network Automation appliance’ını bulabilirsiniz. Appliance’ı projenize sürükleyip bıraktığınızda gerekli dosyaları indirip kuracaktır. Bu işlem biraz sürebilir. Ama sonrasına appliance’ı başlatıp cihaza console olabileceksiniz.&lt;/p&gt;

&lt;h1 id=&quot;sonuç&quot;&gt;Sonuç&lt;/h1&gt;

&lt;p&gt;Şimdilik bu kadar. Hazır Network Automation’ı indirmişken Ansible’ı birazcık kurcalamanızı öneririm.&lt;/p&gt;</content><author><name>Gunhan Oral</name><email>contact@gunhanoral.com</email></author><category term="gns3" /><category term="gns3 vm" /><category term="VirtualBox" /><summary type="html">GNS3 VM kurarken dikkat edilecek bazı hususlar.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="/assets/article_images/2017-08-23-gns3-vm-kurulumu/gns3.png" /></entry><entry><title type="html">Python Asyncio port scanner</title><link href="/python/async-port-check/" rel="alternate" type="text/html" title="Python Asyncio port scanner" /><published>2017-07-04T22:14:41+03:00</published><updated>2017-07-04T22:14:41+03:00</updated><id>/python/async-port-check</id><content type="html" xml:base="/python/async-port-check/">&lt;p&gt;Today I needed to scan a few thousands of network devices on some ports and of course I needed some kind of concurrency. And here below is a quick, dirty and mostly crappy implementation of asyncio port scanning. Use at your own risk.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;asyncio&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;time&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;now&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;check_port&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;conn&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;asyncio&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;open_connection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;reader&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;writer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;asyncio&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wait_for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;conn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timeout&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'ok'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;except&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'nok'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dests&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ports&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;tasks&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;asyncio&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ensure_future&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;check_port&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dests&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ports&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;responses&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;asyncio&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gather&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tasks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;responses&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;dests&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'asgdshdsgagşilkı'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'1.1.1.2'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'1.1.1.3'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ports&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;asyncio&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_event_loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;future&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;asyncio&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ensure_future&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dests&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ports&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;run_until_complete&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;future&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'#'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Results: '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;future&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'#'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Total time: '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And the output:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;gt; python test.py
asgdshdsgagşilkı 22 nok
asgdshdsgagşilkı 23 nok
1.1.1.2 22 nok
1.1.1.3 23 nok
1.1.1.2 23 nok
1.1.1.3 22 nok
##################################################
Results:  [('asgdshdsgagşilkı', 22, False), ('asgdshdsgagşilkı', 23, False), ('1.1.1.2', 22, False), ('1.1.1.2', 23, False), ('1.1.1.3', 22, False), ('1.1.1.3', 23, False)]
##################################################
Total time:  21.0092453956604
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A quick note: If you run this script on a Windows machine for lots of destination address, you’ll most likely get a ValueError like this. “ValueError: too many file descriptors in select()” Since I have a Linux machine, I didn’t bother searching a solution.&lt;/p&gt;

&lt;p&gt;Update: The solution for this problem is using &lt;code class=&quot;highlighter-rouge&quot;&gt;asyncio.Semaphore&lt;/code&gt;. It limits the maximum concurrent connection. &lt;a href=&quot;https://pawelmhm.github.io/asyncio/python/aiohttp/2016/04/22/asyncio-aiohttp.html&quot;&gt;Source&lt;/a&gt;.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;check_port&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;conn&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;asyncio&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;open_connection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;reader&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;writer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;asyncio&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wait_for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;conn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timeout&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'ok'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;except&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'nok'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;check_port_sem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;check_port&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dests&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ports&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;sem&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;asyncio&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Semaphore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;400&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#Change this value for limitation
&lt;/span&gt;        &lt;span class=&quot;n&quot;&gt;tasks&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;asyncio&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ensure_future&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;check_port_sem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dests&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ports&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;responses&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;asyncio&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gather&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tasks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;responses&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>Gunhan Oral</name><email>contact@gunhanoral.com</email></author><category term="python" /><category term="tcp" /><category term="port check" /><category term="port scanner" /><category term="asyncio" /><category term="featured" /><summary type="html">Today I needed to scan a few thousands of network devices on some ports and of course I needed some kind of concurrency.</summary></entry><entry><title type="html">Tcpdump hakkında</title><link href="/network/tcpdump/" rel="alternate" type="text/html" title="Tcpdump hakkında" /><published>2017-06-15T23:06:06+03:00</published><updated>2017-06-15T23:06:06+03:00</updated><id>/network/tcpdump</id><content type="html" xml:base="/network/tcpdump/">&lt;h1 id=&quot;tcpdump&quot;&gt;Tcpdump&lt;/h1&gt;

&lt;p&gt;Bana kalırsa bir networkçü için olmazsa olmaz şeylerden birisi Wireshark, diğeri de tcpdump’tır. İletişim için kullanılan mesajlaşmaları en ham haliyle görebileceğiniz ve anlamlandırabileceğiniz, yer yer protokol anlamak için yer yer de troubleshooting için kullanmak isteyeceğiniz tcpdump’tan bahsediyorum.&lt;/p&gt;

&lt;p&gt;Sadece network mühendisleri değil, ses ekiplerinden sistem ekiplerine herkes çok temel kontroller için bile kullanabiliyor bu programı. Örneğin ulaşamadığınız bir porta verilen ICMP yanıtı ne? Ping paketleri karşı uca ulaşıyor mu yoksa yolda bir yerde mi kayboluyor? Gönderilen mesajların boyutu ne? SIP contact adresi yanlış mı girilmiş?&lt;/p&gt;

&lt;p&gt;Aradığınızı muhtemelen tcpdump ile bulacaksınız. : )&lt;/p&gt;

&lt;h2 id=&quot;örnekler&quot;&gt;Örnekler&lt;/h2&gt;

&lt;p&gt;Standart bir çıktı:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@ip-172-31-22-143:~# tcpdump -c 10
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on eth0, link-type EN10MB (Ethernet), capture size 262144 bytes
11:19:19.723616 IP ip-172-31-22-143.eu-central-1.compute.internal.ssh &amp;gt; x.x.x.x.dsl.static.turk.net.10816: Flags [P.], seq 320:384, ack 1, win 284, length 64
11:19:19.723816 IP ip-172-31-22-143.eu-central-1.compute.internal.44612 &amp;gt; ip-172-31-0-2.eu-central-1.compute.internal.domain: 1049+ PTR? x.x.x.x.in-addr.arpa. (43)
...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Sadece ICMP paketleri:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@ip-172-31-22-143:~# tcpdump icmp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Bu cihaza ya da bu cihazdan dışarıya bir yere ping atmayı deneyin bakalım. Tcpdump’ı CTRL + C ile sonlandırabilirsiniz.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on eth0, link-type EN10MB (Ethernet), capture size 262144 bytes

11:24:28.449759 IP x.x.x.x.dsl.static.turk.net &amp;gt; ip-172-31-22-143.eu-central-1.compute.internal: ICMP echo request, id 1, seq 7, length 40
11:24:28.449784 IP ip-172-31-22-143.eu-central-1.compute.internal &amp;gt; x.x.x.x.dsl.static.turk.net: ICMP echo reply, id 1, seq 7, length 40
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Sadece 8.8.8.8 ile yapılan iletişim:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@ip-172-31-22-143:~# tcpdump host 8.8.8.8
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on eth0, link-type EN10MB (Ethernet), capture size 262144 bytes

11:27:26.104170 IP ip-172-31-22-143.eu-central-1.compute.internal &amp;gt; google-public-dns-a.google.com: ICMP echo request, id 9008, seq 1, length 64
11:27:26.126807 IP google-public-dns-a.google.com &amp;gt; ip-172-31-22-143.eu-central-1.compute.internal: ICMP echo reply, id 9008, seq 1, length 64
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Biraz daha toparlanmış bir çıktı istiyorsanız:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@ip-172-31-22-143:~# tcpdump -ttttnnvv icmp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;tcpdump: listening on eth0, link-type EN10MB (Ethernet), capture size 262144 bytes
2017-05-01 11:51:54.949377 IP (tos 0x0, ttl 119, id 21024, offset 0, flags [none], proto ICMP (1), length 60)
    x.x.x.x &amp;gt; 172.31.22.143: ICMP echo request, id 1, seq 19, length 40
2017-05-01 11:51:54.949404 IP (tos 0x0, ttl 64, id 31385, offset 0, flags [none], proto ICMP (1), length 60)
    172.31.22.143 &amp;gt; x.x.x.x: ICMP echo reply, id 1, seq 19, length 40
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;kullanımı&quot;&gt;Kullanımı&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-t veya -tttt&lt;/code&gt; : Paketlerin zaman bilgisini okunabilir hale getiriyor. t sayısı arttıkça daha okunaklı hale geliyor.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-n ve -nn&lt;/code&gt; : n hostname’leri çözmemeyi sağlarken nn hostname’leri ve portları çözmeyi engelliyor.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-v, -vv, -vvv&lt;/code&gt; : Paket detay bilgilerini göstermeyi sağlarken&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Belli başlı diğer seçenekler:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-i any&lt;/code&gt; : Tüm interface’leri dinle.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-i eth0&lt;/code&gt; : Sadece eth0 interface’ini dinle.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-n&lt;/code&gt; : Hostname’leri çözümleme.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-nn&lt;/code&gt; : Hostname’leri ya da port isimlerini çözümleme.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-t&lt;/code&gt; : Bu zaman damgalarını insan okuyacak!&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-tttt&lt;/code&gt; : Bu zaman damgalarını gerçekten insan okuyacak, azıcık insaf. :(&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-X&lt;/code&gt; : Paket içeriğini hem hexadecimal hem den ascii olarak göster.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-XX&lt;/code&gt; : Paket içeriğini hem hexadecimal hem den ascii olarak gösterirken ethernet header’larını da ekle.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-c&lt;/code&gt; : Belirtilen sayıda paketten sonra capture’ı durdur.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-e&lt;/code&gt; : Ethernet headerlarını da çıktıya ekle.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-w&lt;/code&gt; : Çıktıları belirtilen dosya ismiyle kaydetmeye yarıyor. En çok kullanılan seçenek belki de; çıktıları -w ile .pcap olarak yazdırıp Wireshark ile incelemek.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Tabi bunlar yeterli değil. Yukarıdaki argümanlar çoğunlukla çıktının nasıl olacağını belirliyor. Önemli olan nereyi, nasıl dinleyeceğimiz. Hangi interface’e hangi ip:port’tan gelen ne çeşit istekleri incelemek istiyorsak bunları &lt;em&gt;uygun bir dille&lt;/em&gt; belirtmek gerek.&lt;/p&gt;

&lt;h3 id=&quot;uygun-dil&quot;&gt;Uygun dil&lt;/h3&gt;

&lt;p&gt;Tcpdump syntax’i &lt;a href=&quot;https://wiki.wireshark.org/CaptureFilters&quot;&gt;Wireshark’ın capture filter’ı&lt;/a&gt; ile aynı seçeneklere sahiptir.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Host belli bir ip’yi ya da domain’i temsil eder. Örn: &lt;code class=&quot;highlighter-rouge&quot;&gt;tcpdump host 192.168.1.1&lt;/code&gt; ya da &lt;code class=&quot;highlighter-rouge&quot;&gt;tcpdump host gunhanoral.com&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Net network’ün kısaltmasıdır. Örn: &lt;code class=&quot;highlighter-rouge&quot;&gt;tcpdump net 192.168.0.0/24&lt;/code&gt; ya da &lt;code class=&quot;highlighter-rouge&quot;&gt;tcpdump net 192.168.0.0 mask 255.255.255.0&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Port parametresiyle port belirtilebilir. Çok şaşıracaksınız, &lt;code class=&quot;highlighter-rouge&quot;&gt;tcpdump port 80&lt;/code&gt; komutu 80 portunu kullanan trafiği gösterir.
    &lt;ul&gt;
      &lt;li&gt;libpcap belirli bir versiyonun üzerindeyse portrange de çalışacaktır: &lt;code class=&quot;highlighter-rouge&quot;&gt;tcpdump portrange 100-200&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Src ve dst sırasıyla kaynak ve hedef noktaların belirlenmesinde yardımcı olur. Örn: &lt;code class=&quot;highlighter-rouge&quot;&gt;tcpdump src net 192.168.1.0/24&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Protokol ismi kullanmanız o protokole ait paketlerin filtrelenmesini sağlar. &lt;code class=&quot;highlighter-rouge&quot;&gt;tcpdump arp&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;En güzeli de tüm bu parametreleri and, or, not gibi boolean mantığına uygun bir biçimde birlikte kullanabilmemiz!
    &lt;ul&gt;
      &lt;li&gt;tcpdump not broadcast and not multicast&lt;/li&gt;
      &lt;li&gt;tcpdump port not 53 and not arp&lt;/li&gt;
      &lt;li&gt;tcpdump host 192.168.1.1 or host 192.168.1.3&lt;/li&gt;
      &lt;li&gt;tcpdump ‘host gunhanoral.com and not (port 80 or port 25)’&lt;/li&gt;
      &lt;li&gt;tcpdump ‘src net 192.168.0.0/16 and dst net (10.0.0.0/8 or 172.16.0.0/16)’&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Bu dili kullanarak bir uygulama yapalım. Son dönemde ortalığı kasıp kavuran Wannacry bildiğiniz üzere SMB portu (139) üzerinden yayılıyordu. Gelin sistemimize bu porttan gelen bir şey var mı bakalım.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;tcpdump -ttttnnvv port 139
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Yeterli bir süre beklememe rağmen sonuç alamadım. Ben de bu porta telnet olmaya karar verdim:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;tcpdump: listening on eth0, link-type EN10MB (Ethernet), capture size 262144 bytes
2017-06-15 18:23:29.733650 IP (tos 0x0, ttl 127, id 19970, offset 0, flags [DF], proto TCP (6), length 52)
    x.x.x.x.58114 &amp;gt; y.y.y.y.139: Flags [S], cksum 0x65c2 (correct), seq 2540976548, win 8192, options [mss 1460,nop,wscale 8,nop,nop,sackOK], length 0
2017-06-15 18:23:29.733718 IP (tos 0x0, ttl 64, id 49439, offset 0, flags [DF], proto TCP (6), length 40)
    y.y.y.y.139 &amp;gt; x.x.x.x.58114: Flags [R.], cksum 0xc681 (correct), seq 0, ack 2540976549, win 0, length 0
2017-06-15 18:23:30.234072 IP (tos 0x0, ttl 127, id 19972, offset 0, flags [DF], proto TCP (6), length 52)
    x.x.x.x.58114 &amp;gt; y.y.y.y.139: Flags [S], cksum 0x65c2 (correct), seq 2540976548, win 8192, options [mss 1460,nop,wscale 8,nop,nop,sackOK], length 0
2017-06-15 18:23:30.234227 IP (tos 0x0, ttl 64, id 49467, offset 0, flags [DF], proto TCP (6), length 40)
    y.y.y.y.139 &amp;gt; x.x.x.x.58114: Flags [R.], cksum 0xc681 (correct), seq 0, ack 1, win 0, length 0
2017-06-15 18:23:30.734781 IP (tos 0x0, ttl 127, id 19974, offset 0, flags [DF], proto TCP (6), length 48)
    x.x.x.x.58114 &amp;gt; y.y.y.y.139: Flags [S], cksum 0x79d1 (correct), seq 2540976548, win 8192, options [mss 1460,nop,nop,sackOK], length 0
2017-06-15 18:23:30.734823 IP (tos 0x0, ttl 64, id 49483, offset 0, flags [DF], proto TCP (6), length 40)
    y.y.y.y.139 &amp;gt; x.x.x.x.58114: Flags [R.], cksum 0xc681 (correct), seq 0, ack 1, win 0, length 0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Görüldüğü üzere x.x.x.x ip’li bilgisayarımdan y.y.y.y ip’si 139 nolu porta bağlanmaya çalıştım ama yapılan üç denemede de TCP SYN isteğime RST cevabı geldi.&lt;/p&gt;

&lt;h2 id=&quot;derin-mevzular&quot;&gt;Derin mevzular&lt;/h2&gt;

&lt;p&gt;Kendimize rehber olarak &lt;a href=&quot;http://www.tcpdump.org/manpages/tcpdump.1.html&quot;&gt;tcpdump manpage&lt;/a&gt; alalım ve SYN paketlerini filtreleyelim. SYN bayrağının havada olduğu TCP paketlerine bakacak olursak 13. oktetin değerinin 2 olmasını bekleriz. Zaten bu beklentimiz sonuç da verecektir:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tcpdump -ttttnnvv port 139 and tcp[13] == 2
tcpdump: listening on eth0, link-type EN10MB (Ethernet), capture size 262144 bytes
2017-06-15 18:38:54.743018 IP (tos 0x0, ttl 127, id 22877, offset 0, flags [DF], proto TCP (6), length 52)
    x.x.x.x.58238 &amp;gt; y.y.y.y.139: Flags [S], cksum 0x8972 (correct), seq 1266246003, win 8192, options [mss 1460,nop,wscale 8,nop,nop,sackOK], length 0
2017-06-15 18:38:55.243962 IP (tos 0x0, ttl 127, id 22879, offset 0, flags [DF], proto TCP (6), length 52)
    x.x.x.x.58238 &amp;gt; y.y.y.y.139: Flags [S], cksum 0x8972 (correct), seq 1266246003, win 8192, options [mss 1460,nop,wscale 8,nop,nop,sackOK], length 0
2017-06-15 18:38:55.744739 IP (tos 0x0, ttl 127, id 22881, offset 0, flags [DF], proto TCP (6), length 48)
    x.x.x.x.58238 &amp;gt; y.y.y.y.139: Flags [S], cksum 0x9d81 (correct), seq 1266246003, win 8192, options [mss 1460,nop,nop,sackOK], length 0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Peki neden? Alın teri değil, copy paste:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;0                            15                              31
-----------------------------------------------------------------
|          source port          |       destination port        |
-----------------------------------------------------------------
|                        sequence number                        |
-----------------------------------------------------------------
|                     acknowledgment number                     |
-----------------------------------------------------------------
|  HL   | rsvd  |C|E|U|A|P|R|S|F|        window size            |
-----------------------------------------------------------------
|         TCP checksum          |       urgent pointer          |
-----------------------------------------------------------------
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Her bir satır 32 bit, yani 4 oktet. TCP flaglerimiz 4. satırda. Birlikte sayalım:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;İlk satır 0’ıncı ve 3’üncü oktet aralığını gösteriyor.&lt;/li&gt;
  &lt;li&gt;İkinci satırımız 4-7 arası&lt;/li&gt;
  &lt;li&gt;8-11 arası&lt;/li&gt;
  &lt;li&gt;
    &lt;ol&gt;
      &lt;li&gt;oktet offset ve reserved bitler. 13. oktet… aradığımız bayraklar.&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;SYN flag’i (sağdan sayarsak) kaçıncı bitinde peki bu oktet’in? İkinci sırasında. Sadece SYN’in aktif olduğu flag bit şeklinde nasıl yazılır? 00000010. Bu da eşittir 2.
Yani sadece RST flag’i havada olacak olsa beklentimiz ne olurdu? 3 mü? Hayır. 00000100 = 4.
ACK-SYN paketlerini nasıl buluruz? 13. oktet değeri 00010010 = 16 + 2 = 18.&lt;/p&gt;

&lt;p&gt;Deneyelim:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tcpdump -ttttnnvv tcp[13] == 18
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Aldığımız yanıt:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;2017-06-15 18:51:18.003595 IP (tos 0x0, ttl 64, id 0, offset 0, flags [DF], proto TCP (6), length 52)
    y.y.y.y.22 &amp;gt; x.x.x.x.58371: Flags [S.], cksum 0x34ce (incorrect -&amp;gt; 0x1b1c), seq 2640079490, ack 1360160, win 29200, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Not: Flags [S.] aslen S ve A flaglerini temsil ediyor. SYN + ACK yani. &lt;a href=&quot;http://article.gmane.org/gmane.network.tcpdump.devel/6383&quot;&gt;Kaynak&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Peki yanında ACK olsun olmasın ben herhangi bir SYN paketini yakalamak istiyorum. Yukarıdaki filtreler bu konuda bize yardımcı olmayacaktır zira bu filtreler spesifik olarak ilk örnekte sadece S bitinin 1 olduğu; ikinci örnekte de sadece S ve A bitlerinin 1 olduğu durumları arayacak şekilde dizayn edilmiştir.&lt;/p&gt;

&lt;h4 id=&quot;ne-yapmalı-ne-etmeli-bir-oyunbazlık-bir-şeytanlık&quot;&gt;Ne yapmalı, ne etmeli, bir oyunbazlık bir şeytanlık:&lt;/h4&gt;

&lt;p&gt;SYN biti hangisiydi? 2.bit. Yani biz herhangi bir flag değerini 00000010 ile boolean mantık olarak AND’lersek sonucu 00000010 veren her flag değerinin SYN biti aktiftir.&lt;/p&gt;

&lt;p&gt;Deneyelim:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;01010101	01000010	11111111
00000010	00000010	00000010
--------	--------	--------
00000000	00000010	00000010
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Sanki doğru yoldayız. AND işlemini &amp;amp; olarak yazmalıyız. Ancak bash bu özel karakteri background için kullanacaktır, o yüzden tırnak içine almalıyız.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tcpdump -ttttnnvv 'tcp[13] &amp;amp; 2 == 2'
tcpdump: listening on eth0, link-type EN10MB (Ethernet), capture size 262144 bytes
2017-06-15 19:35:31.874196 IP (tos 0x0, ttl 127, id 5650, offset 0, flags [DF], proto TCP (6), length 52)
    x.x.x.x.58897 &amp;gt; y.y.y.y.22: Flags [S], cksum 0x9526 (correct), seq 3756179255, win 8192, options [mss 1460,nop,wscale 8,nop,nop,sackOK], length 0
2017-06-15 19:35:31.874257 IP (tos 0x0, ttl 64, id 0, offset 0, flags [DF], proto TCP (6), length 52)
    y.y.y.y.22 &amp;gt; x.x.x.x.58897: Flags [S.], cksum 0x34ce (incorrect -&amp;gt; 0x2fb9), seq 2075498391, ack 3756179256, win 29200, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Tabi bu işlemler sadece TCP’ye özel değil. Bir çok farklı işlem yapılabilir:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.ietf.org/rfc/rfc3514.txt&quot;&gt;Evil Bit&lt;/a&gt;‘i set olanlar:  &lt;code class=&quot;highlighter-rouge&quot;&gt;tcpdump 'ip[6] &amp;amp; 128 != 0' &lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;HTTP GET: &lt;code class=&quot;highlighter-rouge&quot;&gt;tcpdump 'tcp[32:4] = 0x47455420'&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;TTL’i 10’dan az olanlar: &lt;code class=&quot;highlighter-rouge&quot;&gt;tcpdump 'ip[8] &amp;lt; 10'&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Gunhan Oral</name><email>contact@gunhanoral.com</email></author><category term="data" /><category term="ip" /><category term="frame" /><category term="ethernet" /><category term="wireshark" /><category term="Protocols" /><category term="featured" /><summary type="html">Tcpdump kullanarak paket yakalama, inceleme hakkında</summary></entry><entry><title type="html">UDP nedir ne değildir?</title><link href="/network/udp-nedir/" rel="alternate" type="text/html" title="UDP nedir ne değildir?" /><published>2017-04-05T01:32:06+03:00</published><updated>2017-04-05T01:32:06+03:00</updated><id>/network/udp-nedir</id><content type="html" xml:base="/network/udp-nedir/">&lt;h1 id=&quot;udp---user-datagram-protocol&quot;&gt;UDP - User Datagram Protocol&lt;/h1&gt;

&lt;h2 id=&quot;datagram-nedir&quot;&gt;Datagram nedir?&lt;/h2&gt;

&lt;p&gt;Şimdiye kadar datagram’ın ne olduğunu soran bile duymadım ama yine de tanımlayalım. &lt;a href=&quot;https://tools.ietf.org/html/rfc1594#page-33&quot;&gt;RFC 1594&lt;/a&gt;‘e göre Datagram:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Datagram
A self-contained, independent entity of data carrying
sufficient information to be routed from the source
to the destination computer without reliance on earlier
exchanges between this source and destination computer and
the transporting network.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Yani iki temel özelliğe sahip veri bloklarından bahsediyoruz:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Başlangıç noktasından hedefe route edilebilmesi için bir öncül mesajlaşmaya gereksinim duymayacak.&lt;/li&gt;
  &lt;li&gt;Bu aktarımın sağlanabilmesi için tüm bilgileri kendi üzerinde bulundurur olacak.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;udp-nedir&quot;&gt;UDP nedir?&lt;/h2&gt;

&lt;p&gt;UDP düşük gecikme ve kayıp toleransı amacıyla oluşturulmuş bir transport layer protokolüdür. Bir mesaj göndermek istiyorsanız gönderirsiniz. Karşı taraftan bu mesaj ile ne yaptığı UDP için önemli değildir. Yanıt beklemez, tekrar gönderimler UDP protokolüne ait değildir.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/article_images/2017-04-05-udp-nedir/UDPheaders.png&quot; alt=&quot;A UDP Datagram&quot; title=&quot;UDP Headers&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;UDP protokol numarası: 17&lt;/li&gt;
  &lt;li&gt;UDP header boyutu:
    &lt;ul&gt;
      &lt;li&gt;Source port 2 byte = 16 bit = 2**16 = 65536 port&lt;/li&gt;
      &lt;li&gt;Destination port 2 byte = 16 bit = 2**16 = 65536 port&lt;/li&gt;
      &lt;li&gt;Length 2 byte = 16 bit&lt;/li&gt;
      &lt;li&gt;Checksum 2 byte = 16 bit&lt;/li&gt;
      &lt;li&gt;Toplam 8 byte = 32 bit&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;udp-ile-tcp-farkları&quot;&gt;UDP ile TCP farkları&lt;/h2&gt;

&lt;p&gt;UDP’nin aksine, TCP’de bilginin iletilebilmei için 3-way handshake gerekir:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;SYN&lt;/li&gt;
  &lt;li&gt;ACK+SYN&lt;/li&gt;
  &lt;li&gt;ACK&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;/assets/article_images/2017-04-05-udp-nedir/Tcp-handshake.svg.png&quot; alt=&quot;TCP Handshake&quot; title=&quot;TCP Handshake&quot; /&gt;&lt;/p&gt;

&lt;p&gt;TCP’de retransmission -yeniden gönderim- protokol içinde mevcut. Bu sayede verinin karşı uca iletildiğinden emin olunabiliyor. UDP’de bu şekilde bir yaklaşım bulunmamakta.&lt;/p&gt;

&lt;p&gt;Mesajların sırası bozulmaz. Transmisyon esnasında sırası değişse bile TCP buffer bunu tekrar düzenler. Oysa UDP’de bu şekilde bir sıralama yapacak bir header yoktur.&lt;/p&gt;

&lt;h2 id=&quot;neden-udp-tercih-edilir&quot;&gt;Neden UDP tercih edilir?&lt;/h2&gt;

&lt;p&gt;UDP IP katmanının üzerinde yer alan hafif bir transport katmanı öğesidir. Sıralama, teyit etme, stream oluşturma gibi yükümlülükleri olmadığı için hızlı çalışır. Özellikle &lt;em&gt;kaybın&lt;/em&gt; &lt;em&gt;gecikmeye&lt;/em&gt; tercih edildiği durumlarda kullanılır. Mesela ses trafiği. Ses trafiğinde kaybolan birkaç paketin tüm trafiği bekletmesini istemezsiniz.&lt;/p&gt;

&lt;h2 id=&quot;udp-kullanan-başlıca-servisler--uygulamalar&quot;&gt;UDP kullanan başlıca servisler / uygulamalar&lt;/h2&gt;
&lt;p&gt;Akla ilk gelenler:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;DNS&lt;/li&gt;
  &lt;li&gt;DHCP&lt;/li&gt;
  &lt;li&gt;RTP&lt;/li&gt;
  &lt;li&gt;SIP&lt;/li&gt;
  &lt;li&gt;SNMP&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;udp-gönderen-bir-script&quot;&gt;UDP gönderen bir script&lt;/h3&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;socket&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;UDP_IP&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;127.0.0.1&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#Hedef IP
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UDP_PORT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5005&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#Hedef port
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MESSAGE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Merhabalaaar&quot;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;message:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MESSAGE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;sock&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;socket&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;socket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;socket&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AF_INET&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# Internet
&lt;/span&gt;                     &lt;span class=&quot;n&quot;&gt;socket&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SOCK_DGRAM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# UDP
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sendto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MESSAGE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UDP_IP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UDP_PORT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>Gunhan Oral</name><email>contact@gunhanoral.com</email></author><category term="data" /><category term="ip" /><category term="udp" /><category term="layer 4" /><category term="transport" /><category term="featured" /><summary type="html">UDP ile ilgili temel bilgiler ve biraz daha fazlası. Bu yazı çok detaylara inmeden başlangıç seviyesi diyebileceğim bir giriş oldu. Zamanla daha detaylı bilgilendirmeler de gelecektir.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="/assets/article_images/2017-04-05-udp-nedir/background.jpg" /></entry><entry><title type="html">tcl expect ile huawei konfigürasyonu</title><link href="/network/expect-ile-konfigurasyon/" rel="alternate" type="text/html" title="tcl expect ile huawei konfigürasyonu" /><published>2017-03-17T15:43:06+03:00</published><updated>2017-03-17T15:43:06+03:00</updated><id>/network/expect-ile-konfigurasyon</id><content type="html" xml:base="/network/expect-ile-konfigurasyon/">&lt;p&gt;Özellikle network cihazlarından çeşitli komut çıktılarını almak veya konfigürasyon değişikliği yapmak gerektiğinde expect akla ilk gelen seçeneklerden birisi. Cihazdan verilen yanıtlara göre çeşitli alt dallara inilebilmesi; yani “interface down ise şöyle yap, yok interface up fakat üzerinden trafik geçmemişse böyle yap” diyebilmenizi sağlayan bir yapıda olması expect’i uzunca bir süre otomatik konfigürasyon için biçilmiş kaftan kıldı. Aşağıda çok noktalı bir müşteriye ait Huawei cihazlarda snmp konfigürasyonu yapmak için kullandığım kodu bulabilirsiniz.&lt;/p&gt;

&lt;p&gt;Biraz açıklamam gerekirse ilgili host’a telnet olmayı deniyor. Telnet başarılı olursa username &amp;amp; password bilgilerini giriyor. Ardından prompt bekleyip uygun komutları gönderiyor. Ekrana da yapılan işlemle ilgili çeşitli logları yazıyor.&lt;/p&gt;

&lt;div class=&quot;language-tcl highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;#!/usr/bin/expect&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt; timeout 3
&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt; host &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;lindex&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$argv&lt;/span&gt; 0&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt; hostname &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;lindex&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$argv&lt;/span&gt; 1&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt; username &lt;span class=&quot;s2&quot;&gt;&quot;uname&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt; password &lt;span class=&quot;s2&quot;&gt;&quot;s3cr3+&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt; command1 &lt;span class=&quot;s2&quot;&gt;&quot;sys&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt; command2 &lt;span class=&quot;s2&quot;&gt;&quot;acl number 1234&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt; command3 &lt;span class=&quot;s2&quot;&gt;&quot;rule 10 permit source 1.2.3.4 0.0.0.255&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt; command4 &lt;span class=&quot;s2&quot;&gt;&quot;quit&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt; command5 &lt;span class=&quot;s2&quot;&gt;&quot;snmp-agent community read snmpcommunity acl 1234&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt; command6 &lt;span class=&quot;s2&quot;&gt;&quot;return&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt; command7 &lt;span class=&quot;s2&quot;&gt;&quot;save all&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt; OUTPUT &lt;span class=&quot;s2&quot;&gt;&quot;dummy text&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;eval&lt;/span&gt; spawn telnet &lt;span class=&quot;nv&quot;&gt;$host&lt;/span&gt;
expect &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;&quot;Connected&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Connected&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;&quot;Connection closed by foreign host&quot;&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt; OUTPUT &lt;span class=&quot;s2&quot;&gt;&quot;Telnet busy, try again later&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; puts &lt;span class=&quot;s2&quot;&gt;&quot;### OUTPUT for &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$hostname&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$host:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; &lt;/span&gt;$&lt;span class=&quot;s2&quot;&gt;OUTPUT ###&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; exit&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;&quot;No route to host&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt; OUTPUT &lt;span class=&quot;s2&quot;&gt;&quot;Destination host unreachable&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; puts &lt;span class=&quot;s2&quot;&gt;&quot;### OUTPUT for &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$hostname&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$host:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; &lt;/span&gt;$&lt;span class=&quot;s2&quot;&gt;OUTPUT ###&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; exit&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
timeout &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt; OUTPUT &lt;span class=&quot;s2&quot;&gt;&quot;connection timeout&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; puts &lt;span class=&quot;s2&quot;&gt;&quot;### OUTPUT for &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$hostname&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$host:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; &lt;/span&gt;$&lt;span class=&quot;s2&quot;&gt;OUTPUT ###&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; exit&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
expect &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;&quot;sername:&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;send &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$username&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
timeout &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt; OUTPUT &lt;span class=&quot;s2&quot;&gt;&quot;didnt get username prompt unexpected device maybe&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  puts &lt;span class=&quot;s2&quot;&gt;&quot;### OUTPUT for &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$hostname&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$host:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; &lt;/span&gt;$&lt;span class=&quot;s2&quot;&gt;OUTPUT ###&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; exit&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
expect &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;&quot;assword:&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;send &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$password&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
timeout &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt; OUTPUT &lt;span class=&quot;s2&quot;&gt;&quot;didnt get password prompt unexpected device maybe&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  puts &lt;span class=&quot;s2&quot;&gt;&quot;### OUTPUT for &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$hostname&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$host:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; &lt;/span&gt;$&lt;span class=&quot;s2&quot;&gt;OUTPUT ###&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; exit&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
expect &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;&quot;&amp;gt;&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;send &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$command1&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
timeout &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt; OUTPUT &lt;span class=&quot;s2&quot;&gt;&quot;check login credentials&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; puts &lt;span class=&quot;s2&quot;&gt;&quot;### OUTPUT for &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$hostname&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$host:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; &lt;/span&gt;$&lt;span class=&quot;s2&quot;&gt;OUTPUT ###&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; exit&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
expect &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\]&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
send &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$command2&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
expect &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\]&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
send &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$command3&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
expect &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\]&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
send &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$command4&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
expect &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\]&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
send &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$command5&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
expect &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\]&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
send &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$command6&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
expect &lt;span class=&quot;s2&quot;&gt;&quot;&amp;gt;&quot;&lt;/span&gt;
send &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$command7&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
expect &lt;span class=&quot;s2&quot;&gt;&quot;n&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\]&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;:&quot;&lt;/span&gt;
send &lt;span class=&quot;s2&quot;&gt;&quot;y&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
expect &lt;span class=&quot;s2&quot;&gt;&quot;&amp;gt;&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt; OUTPUT &lt;span class=&quot;s2&quot;&gt;&quot;Done.&quot;&lt;/span&gt;
send &lt;span class=&quot;s2&quot;&gt;&quot;quit&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
expect eof
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;### OUTPUT for &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$hostname&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$host:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; &lt;/span&gt;$&lt;span class=&quot;s2&quot;&gt;OUTPUT ###&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>Gunhan Oral</name><email>contact@gunhanoral.com</email></author><category term="tcl" /><category term="expect" /><category term="huawei" /><category term="config" /><summary type="html">Özellikle network cihazlarından çeşitli komut çıktılarını almak veya konfigürasyon değişikliği yapmak gerektiğinde expect akla ilk gelen seçeneklerden birisi. Bu yazıda Huawei örneğinden yola çıkarak expect'i tanıttım.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="/assets/article_images/2017-03-17-expect-ile-konfigurasyon/cables_l.jpg" /></entry><entry><title type="html">Python ile resim boyutu ölçeklendirmek</title><link href="/python/python-resim-boyutu/" rel="alternate" type="text/html" title="Python ile resim boyutu ölçeklendirmek" /><published>2017-02-28T01:42:25+03:00</published><updated>2017-02-28T01:42:25+03:00</updated><id>/python/python-resim-boyutu</id><content type="html" xml:base="/python/python-resim-boyutu/">&lt;p&gt;Siteyi yapılandırırken fotoğrafımın boyutlarını ölçeklendirmem gerektiğinde bu kadar temel bir işlemi yapabileceğim program bulamamak beni ufaktan afallattı. Sonra da hazır elimin altında Python var diyip Python ile bunu yapıp yapamayacağımı görmek istedim. Kısa bir google aramasından sonra &lt;a href=&quot;https://opensource.com/life/15/2/resize-images-python&quot;&gt;bu siteye&lt;/a&gt; ulaştım. Burada yer alan ilk kod parçasını kullanarak basit aritmetik işlemlerle istenen genişlikte, oranlı bir resim elde edilebiliyor.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;PIL&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;basewidth&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;300&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;‘&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fullsized_image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;jpg&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;’&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;wpercent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;basewidth&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;hsize&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wpercent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;resize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;basewidth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hsize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ANTIALIAS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;‘&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;resized_image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;jpg&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;’&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Eğer yükseklik bilgisi üzerinden ilerlemek gerekirse aşağıdaki kod parçası kullanılabilir:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;PIL&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;baseheight&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;560&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;‘&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fullsized_image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;jpg&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;’&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;hpercent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;baseheight&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;wsize&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hpercent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;resize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wsize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;baseheight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ANTIALIAS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;‘&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;resized_image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;jpg&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;’&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Hatta:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;PIL&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;resimize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;so&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;de&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;si&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;basewidth&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;si&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;img&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;so&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;wpercent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;basewidth&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;hsize&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wpercent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;img&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;resize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;basewidth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hsize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ANTIALIAS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;de&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>Gunhan Oral</name><email>contact@gunhanoral.com</email></author><category term="python" /><category term="image" /><category term="resize" /><summary type="html">Kişisel web sitemin ilk postu bu siteyi düzenlerken gereksinim duyduğum ilk öğelerden birisi için, resim boyutu değiştirmek için çözüm sağladığı gibi Python çözümlerine güzel bir örnek oluşturuyor.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="/assets/article_images/2014-08-29-welcome-to-jekyll/desktop.JPG" /></entry></feed>